<!DOCTYPE html>
<html>
<head>
        <meta charset="utf-8">
        <title>管理员界面</title>
        <link rel="stylesheet" href="css/AdminPage_style.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<link rel="stylesheet" href="css/tanchuang_tea.css">
        <!-- CSS -->
 
</head>
<body onload="searchall()">
	<div class="shuipingxian">
				<div >教师管理界面</div>
			</div>
			<!-- 这是一条水平线 -->
			<div class="shuipingxian2"></div>
	<table    class="class2" >
	 <tr >
	 		   <td  class="class_border1">
	 			   <a class="pic">
	 				   <i class="fa fa-home"  style="color: #000000;"></i>
	 			   首页</a>
	 			   </td>
	 		 </tr>
	 		  <tr>
	 		   <td  class="class_border">
	 			   <a class="pic" href="AdminPage.html">
	 			   	 <i class="fa fa-tasks"  style="color: #000000;"></i>
	 			      <font color="white">管理学生信息 </font> 
	 				  </a>
	 			  </td>
	 		 </tr>
	 		  <tr>
	 		   <td align="center" class="class_border">
	 			   <a class="pic" href="AdminPage_tea.html">
	 			   	<i class="fa fa-tasks"  style="color: #000000;"></i>
	 			   <font color="white">管理教师信息</font> </a>
	 			   </td>
	 		 </tr>
	 		  <tr>
	 		   <td align="center" class="class_border">
	 			   <a class="pic" href="AdminPage_Cur.html">
	 			   <i class="fa fa-tasks"  style="color: #000000;"></i>
	 			   <font  color="white">管理课程信息</font>
	 			   </a>
	 			   </td>
	 		 </tr>
	 		  <tr>
	 		   <td align="center" class="class_border">
	 			   <a class="pic" href="AdminPage_Review.html">
	 			   	<i class="fa fa-tasks"  style="color: #000000;"></i>
	 			   <font  color="white">管理评价信息</font>
	 			    </a>
	 			   </td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	 		 <tr>
	 		   <td align="center" ></td>
	 		 </tr>
	</table>
	<div class="box">
			<div class="TOP">
				教师信息
			</div>
			<div class="THead">
				<input id="pno2" style="width:600px;height:30px;margin-top:15px;margin-left: 80px;font-size:15px">
					<button onclick="searchprf()" style="height:35px;width:50px;font-size:15px;cursor: pointer;">搜索</button>
				<button onclick="dianwo1()" class="add">
				增加教师信息
				</button>
				<button onclick="dianwo()" class="change">
					修改教师信息
				</button>
				<div class="zhezhao" id='zhezhao'>
							<div class="tankuang1">
								<div id="header">
									<span class="h1">修改教师信息</span>
									<span class="h5">请在需要修改信息的框里面键入新的信息</span>
									<!-- 这里后端可不可以做成先置入信息，然后如果有需要修改的再进行修改？我就把placeholder改成value了哈
									 就是希望这里面的value可以是数据库里面的值-->
									<input type="text" name="d1" id="pno3" value="请输入该教师的编号" class="switch1"/>
									<input type="text" name="d1" id="ppos2" value="请重置该教师的职称" class="switch3"/>
									<input type="text" name="d1" id="pdept2" value="请重置该教师的所属院系" class="switch5"/>
									<div id="header-right" onclick="hidder()">x</div>
									 <input type="submit" name="" id="" value="提交信息" class="submit1" onclick="updateprf()"/>
								</div>
							</div>
						</div>
				<div class="zhezhao1" id='zhezhao1'>
							<div class="tankuang1">
								<div id="header">
									<!-- 昵称学号名称密码密码 -->
									<div style="cursor: pointer;">
										<div class="honey" >增加教师信息</div>
									<span class="h51">请您在下面的输入框中根据提示置入教师的信息</span>
									</div>
									<!-- 下面是点击×可以剪掉网页的设置 -->
									<div id="header-right" onclick="hidder1()">x</div>
									<input type="text" name="d1" id="pno" placeholder="请输入该教师的编号" class="switch1"/>
									<input type="text" name="d1" id="pname" placeholder="请输入该教师的姓名" class="switch2"/>
									<input type="text" name="d1" id="ppos" placeholder="请输入该教师的职称" class="switch3"/>
									<input type="text" name="d1" id="pinfo" placeholder="请输入该教师的介绍" class="switch4"/>
									<input type="text" name="d1" id="pdept" placeholder="请输入该教师的所属院系" class="switch5"/>
									<input type="submit" name="" id="" value="提交信息" class="submit2" onclick="sub()"/>
								</div>
							</div>
						</div>
			</div>
			<div class="infoD">
				<table class="infoT">
	  		<tbody id="tb">
	    	<tr>
	      		<td class="infoH">
					编号
				</td>
				<td class="infoH">
					姓名
				</td>
				<td class="infoH"> 
					职称
				</td>
				<td class="infoH">
					介绍
				</td>
				<td class="infoH">
					所属院系
				</td>
				<td class="infoH">
					删除
				</td>
	    	</tr>
	    	<tr>
	      		<td class="info">
					1001
				</td>
				<td class="info">
					朱虹
				</td>
				<td class="info"> 
					副教授
				</td>
				<td class="info">
					朱虹老师是一位非常厉害的老师，深受学生们的爱戴。
				</td>
				<td class="info">
					信息工程学院
				</td>
				<td class="infoH">
					<button onclick="dele()" style="cursor: pointer;">
					删除
					</button>
				</td>
	    	</tr>
	    	<tr>
	      		<td>&nbsp;</td>
	    	</tr>
	  		</tbody>
	</table>
			</div>
		</div>
		<!-- 这是弹窗的js代码 -->
		<script src="js/jquery-1.11.2.min.js"></script>

		<script type="text/javascript">
		var pno="";
		var pname="";
		var ppos="";
		var pinfo="";
		var pdept="";
				function sub(){
					pno = document.getElementById("pno").value;
					pname = document.getElementById("pname").value;
					ppos= document.getElementById("ppos").value;
					pinfo = document.getElementById("pinfo").value;
					pdept = document.getElementById("pdept").value;
					var params ={
						'pno' :pno,
						'pname' : pname,
						'ppos' : ppos,
						'pinfo' : pinfo,
						'pdept':pdept
					}
					var url="professor/savePrf";
					 $.ajax({
							 type: "post",
							 url : url,
							 // 此处需要告知传递参数类型为JSON，不能缺少
							 contentType : "application/json",
							 // 将JSON转化为字符串传递
							 data : JSON.stringify(params),
							 async: false, // 同步
							 // 成功后的方法
							 success : function(result) {
				  			 if (result ==1) {
					  			 alert("增加教师成功！");
				  			 }
							 }
						 });
					}
				
				function searchall(){
					
					var url="professor/queryall";
					$.ajaxSettings.async = false;
					$.get(url, function(professor, status) {
						show(professor);
					});
					
				}
				function searchprf(){
					var pno= document.getElementById("pno2").value;
					var url="professor/queryprofessor?Pno="+pno;
					$.ajaxSettings.async = false;
					$.get(url, function(professor, status) {
						show1(professor);
					});
					
				}
				function show1(professor){
					
					var tmp="";
					var professorhtml="<tr><td class=\"infoH\">编号</td><td class=\"infoH\">姓名</td><td class=\"infoH\">介绍</td><td class=\"infoH\">职称</td><td class=\"infoH\">所属院系</td><td class=\"infoH\">删除</td></tr>";
					var str2="<td class=\"infoH\"><button onclick=\"dele("+professor.pno+")\">删除</button></td></tr><tr><td>&nbsp;</td></tr>";
					//var str1="<td class=\"info\"><button onclick=\"dianwo()\">修改</button><div class=\"zhezhao\" id='zhezhao'><div class=\"tankuang\"><div id=\"header\"><span class=\"h1\">修改学生信息</span><span class=\"h2\">提示：您只能对学生的账号有效期进行修改</span><span class=\"h3\">请选择学生账号的有效期：</span><!-- 下面是点击×可以剪掉网页的设置 --><div id=\"header-right\" onclick=\"hidder()\">x</div><input type=\"date\" name=\"d1\" id=\"d1\" value=\"2020-12-1\" class=\"date1\"/><input type=\"submit\" name=\"\" id=\"\" value=\"提交信息\" class=\"submit1\" onclick=\"sub3()\"/></div></div></div></td><td class=\"infoH\"><button onclick=\"dele()\">删除</button></td></tr><tr><td>&nbsp;</td></tr>";
					tmp= "<tr><td class=\"info\">"+professor.pno+"</td><td class=\"info\">"+professor.pname+"</td><td class=\"info\">"+professor.pinfo+"</td><td class=\"infoH\">"+professor.ppos+"</td><td class=\"info\">"+professor.pdept+"</td>"+"<td class=\"infoH\"><button onclick=\"dele()\">删除</button></td></tr><tr><td>&nbsp;</td></tr>";
					professorhtml+=tmp;
					
					$('#tb').html(professorhtml);	
				}
				function show(professor){
					var num=professor.length;
					var tmp="";
					var professorhtml="<tr><td class=\"infoH\">编号</td><td class=\"infoH\">姓名</td><td class=\"infoH\">介绍</td><td class=\"infoH\">职称</td><td class=\"infoH\">所属院系</td><td class=\"infoH\">删除</td></tr>";
					//var str2="<td class=\"infoH\"><button onclick=\"dele("+student.sno+")\">删除</button></td></tr><tr><td>&nbsp;</td></tr>";
					//var str1="<td class=\"info\"><button onclick=\"dianwo()\">修改</button><div class=\"zhezhao\" id='zhezhao'><div class=\"tankuang\"><div id=\"header\"><span class=\"h1\">修改学生信息</span><span class=\"h2\">提示：您只能对学生的账号有效期进行修改</span><span class=\"h3\">请选择学生账号的有效期：</span><!-- 下面是点击×可以剪掉网页的设置 --><div id=\"header-right\" onclick=\"hidder()\">x</div><input type=\"date\" name=\"d1\" id=\"d1\" value=\"2020-12-1\" class=\"date1\"/><input type=\"submit\" name=\"\" id=\"\" value=\"提交信息\" class=\"submit1\" onclick=\"sub3()\"/></div></div></div></td><td class=\"infoH\"><button onclick=\"dele()\">删除</button></td></tr><tr><td>&nbsp;</td></tr>";
					for (var i=0;i<num;i++)
					{
					tmp= "<tr><td class=\"info\">"+professor[i].pno+"</td><td class=\"info\">"+professor[i].pname+"</td><td class=\"info\">"+professor[i].pinfo+"</td><td class=\"infoH\">"+professor[i].ppos+"</td><td class=\"info\">"+professor[i].pdept+"</td>"+"<td class=\"infoH\"><button onclick=\"dele("+professor[i].pno+")\">删除</button></td></tr><tr><td>&nbsp;</td></tr>";
					professorhtml+=tmp;
					}
					$('#tb').html(professorhtml);	
				}
				var pno="";
				var ppos="";
				var pdept="";
				function updateprf(){
					pno= document.getElementById("pno3").value;
					ppos= document.getElementById("ppos2").value;
					pdept=document.getElementById("pdept2").value;
					if(ppos!="请重置该教师的职称"&&ppos!="") { updatepos();}
					if(pdept!=""&&pdept!="请重置该教师的所属院系") { updatedept();}
					
				}
				function updatepos(){
					var url="professor/updateppos?Pno="+pno+"&Ppos="+ppos;
					$.ajaxSettings.async = false;
					$.get(url, function(professor, status) {
						alert("修改职称成功！");
					});
					
				}
				function updatedept(){
					var url="professor/updatepdept?Pno="+pno+"&Pdept="+pdept;
					$.ajaxSettings.async = false;
					$.get(url, function(professor, status) {
						alert("修改学院成功！");
					});
					
				}
				</script>
	
				<script type="text/javascript">
					document.getElementById('zhezhao').style.display="none";
					function dianwo(){
						document.getElementById('zhezhao').style.display="";
					}
					function hidder(){
						document.getElementById('zhezhao').style.display="none";
					}
				</script>
				</script>
				<script type="text/javascript">
					document.getElementById('zhezhao1').style.display="none";
					function dianwo1(){
						document.getElementById('zhezhao1').style.display="";
					}
					function hidder1(){
						document.getElementById('zhezhao1').style.display="none";
					}
				</script>
				<script>
					function dele(pno){
						if (confirm("确认删除此用户吗？")==true)
						{
							var url="professor/deletePrf?Pno="+pno;
							$.ajaxSettings.async = false;
							$.get(url, function(professor, status) {
								alert("删除成功！");
							});
						}
						// alert("您确定要删除此用户吗？")
					}
				</script>
				<!-- 这是弹窗的js代码 -->
</body>
</html>


